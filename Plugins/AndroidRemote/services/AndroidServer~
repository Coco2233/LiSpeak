#!/usr/bin/env python

from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
import os, json,lispeak

class AndroidHandler(BaseHTTPRequestHandler):
	def do_GET(self):
		self.path = self.path.replace("%20"," ")
		args = self.path.split("/")
		if args[1] == "command":
			print "Command: "+args[2]
			self.send_response(200)
			self.send_header('Content-type','text/html')
			self.end_headers()
			os.system("../recognize \""+args[2]+"\"")
			self.wfile.write("Completed")
		else:
			self.send_response(200)
			self.send_header('Content-type','text/html')
			self.end_headers()
			self.wfile.write("Unknown Type")
			
if __name__ == '__main__':
    data = lispeak.getInfo()
    root = data['ROOTDIR']
    print root
	port = 45458
	print
	print "Started on port",port
	server_address = ('', port)
	httpd = HTTPServer(server_address, AndroidHandler)
	httpd.serve_forever()
